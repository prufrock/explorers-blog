<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>Engineering Blog</title>
    <link href="https://dkanen.scaleticket.net" />
    <link type="application/atom+xml" rel="self" href="https://dkanen.scaleticket.net/blog/feed.atom" />
    <updated>2020-02-22T03:35:06+00:00</updated>
    <id>https://dkanen.scaleticket.net/blog/feed.atom</id>
    <author>
        <name>Bushel Engineering</name>
    </author>
                <entry>
    <id>https://dkanen.scaleticket.net/blog/jigsaw-many-authors</id>
    <link type="text/html" rel="alternate" href="https://dkanen.scaleticket.net/blog/jigsaw-many-authors" />
    <title>Support Many Authors in Jigsaw</title>
    <published>2020-02-21T00:00:00+00:00</published>
    <updated>2020-02-21T00:00:00+00:00</updated>
    <author>
        <name>David Kanenwisher</name>
    </author>
    <summary type="html">A quick guide on how to support more than one author in Jigsaw....</summary>
    <content type="html"><![CDATA[
        <p>If you were like me and found <code>siteAuthor</code> in config.php and assumed Jigsaw only supported one author, then, my friend, you've come to the right place. The process of adding more than one author isn't too difficult you just have to know it's possible and where to make the necessary tweaks.</p>

<p>When you first install Jigsaw you'll have a <code>config.php</code> that starts with a section that looks like this:</p>

<p>config.php</p>

<pre><code class="text">    'baseUrl' =&gt; '',
    'production' =&gt; false,
    'siteName' =&gt; 'Blog Starter Template',
    'siteDescription' =&gt; 'Generate an elegant blog with Jigsaw',
    'siteAuthor' =&gt; 'Author Name',

    // collections
    'collections' =&gt; [
        'posts' =&gt; [
            'author' =&gt; 'Author Name', // Default author, if not provided in a post
            'sort' =&gt; '-date',
            'path' =&gt; 'blog/{filename}',
        ],
        'categories' =&gt; [
            'path' =&gt; '/blog/categories/{filename}',
            'posts' =&gt; function ($page, $allPosts) {
                return $allPosts-&gt;filter(function ($post) use ($page) {
                    return $post-&gt;categories ? in_array($page-&gt;getFilename(), $post-&gt;categories, true) : false;
                });
            },
        ],
    ],

</code></pre>

<p>Now <code>siteAuthor</code> struck me as sounding like a pretty big deal and I, incorrectly, assumed it was meant to imply the site could only be authored by one person. Further down there is a <code>collections-&gt;posts-&gt;author</code> which I figured set the author on all of the posts since I didn't see an <code>author</code> in example posts.</p>

<p>It turns out that <code>siteAuthor</code> is only used in <code>source/_layouts/rss.blade.php</code> out of the box. That may have change in your Jigsaw blog so it'd be worth searching the <code>source</code> directory for <code>siteAuthor</code>. In <code>rss.blade.php</code> <code>siteAuthor</code> sets the author of the blog. This means if you didn't want there to be only one author you can set it to something more general like <code>Engineering Blog</code> or <code>Cosmetology Blog</code>. Then either all of your engineer friends or cosmetology friends could blog there.</p>

<p>The <code>collections-&gt;posts-&gt;author</code> in <code>config.php</code> is the author that's used when no author is specified on a post. That begs the question: How do you specify an author on a post? It's pretty straightforward. When you make a post add an <code>author</code> attribute to the meta information at the top like so:</p>

<p>meta information with author at the top of a post:</p>

<pre><code class="text">---
extends: _layouts.post
section: content
title: Support Many Authors in Jigsaw
date: 2020-02-21
description: A quick guide on how to support more than one author in Jigsaw.
cover_image: /assets/img/3-ink-bottles.svg
excerpt: If you were like me and found "siteAuthor" in config.php and assumed Jigsaw only supported one author, then, my friend, you've come to the right place.
categories: [jigsaw]
author: David Kanenwisher
---
</code></pre>

<p>Now that I know how to do it I feel a bit silly. It's a feeling I get quite often after I learn something new. What surprising simply but useful thing have you learned recently? Let me know by dropping me a line on the <a href="/contact">contact page</a>.</p>
    ]]></content>
</entry>
            <entry>
    <id>https://dkanen.scaleticket.net/blog/first-attempt-at-collections</id>
    <link type="text/html" rel="alternate" href="https://dkanen.scaleticket.net/blog/first-attempt-at-collections" />
    <title>First Attempt At Collections</title>
    <published>2020-02-19T00:00:00+00:00</published>
    <updated>2020-02-19T00:00:00+00:00</updated>
    <author>
        <name>David Kanenwisher</name>
    </author>
    <summary type="html">How I started using Kotlin&#039;s list and determined how to iterate over it....</summary>
    <content type="html"><![CDATA[
        <p>I need to figure out someway to satisfy my new test which checked to see if two different functions could subscribe to and receive an event from the Broadcaster. Up to this point, in Test Drive Development(TDD) fashion, my tests had allowed me to get away with sending an event to only one subscriber. I wanted to get this functionality into the Broadcaster so I added this test:</p>

<pre><code class="kotlin">    @Test
    fun `more than one Subscriber can receive a broadcast`() {
        val dispatcher = Dispatcher()

        var firstValue = ""

        dispatcher.subscribe { event -&gt; firstValue = event }

        var secondValue = ""

        dispatcher.subscribe { event -&gt; secondValue = event }

        dispatcher.broadcast("event")


        assertEquals("event", firstValue)
        assertEquals("event", secondValue)
    }
</code></pre>

<p>Currently, the Dispatcher only supports a subscriber so the first assertion failed since the first subscriber was replaced by the second. How was I going to create a list of subscribers inside of the Dispatcher? I'd seen a few things about lists in the <a href="https://www.bignerdranch.com/books/kotlin-programming-the-big-nerd-ranch-guide-2/">Big Nerd Ranch Kotlin book</a> and in the <a href="https://kotlinlang.org/docs/reference/collections-overview.html">Kotlin documentation</a>. With that and the knowledge I'd won so far I had a place to start.</p>

<p>I began by creating a <code>subscriberList</code> with the type <code>(String) -&gt; Unit</code> to match the type of the lambdas I knew I wanted to stuff in there. My previous experience with accepting a lambda as a parameter and assigning into a variable had prepared for this part. I'd seen the carrot syntax <code>&lt;Type&gt;</code> in documentation so figured that'd be the way to go. One last thing I ran into trouble with was Kotlin wouldn't let leave <code>subscriberList</code> null so I had to initialize it with <code>listOf()</code> something I saw in the Big Nerd Ranch book. I stuck all this together and got a compiling <code>subcriberList</code> declaration.</p>

<pre><code class="kotlin">    var subscriberList: List&lt;(String) -&gt; Unit&gt; = listOf()
</code></pre>

<p>Cool. Making progress. Now I needed to add a subscriber to my list. I ran into a problem pretty quick. I started updating <code>fun subscribe</code> with <code>subscriberList</code>. I put the <code>.</code> at end of the variable so I could call a method to add an element to the list. I figured I could autocomplete my way to the problem. I typed "a". Didn't see anything. I typed "add". Nothing. I switched to "app" hoping for "append". Nothing. What was going on here? Why weren't there any methods to add something to my list. A quick peak back in the Big Nerd Ranch book and I realize I need a mutable list!</p>

<pre><code class="kotlin">    var subscriberList: MutableList&lt;(String) -&gt; Unit&gt; = mutableListOf()
</code></pre>

<p>Now I have an "add" method on my list. I put that in place like so:</p>

<pre><code class="kotlin">    fun subscribe(subscriberFunction: (String) -&gt; Unit) {
        subscriber = subscriberFunction
        subscriberList.add(subscriber)
    }
</code></pre>

<p>One more thing to do. When I broadcast an event it needs to go to all of the subscribers in <code>subscriberList</code>. How do I iterate over this thing? I always liked using <code>map</code> in other languages when I want to loop over the set with a succinct lambda. I give that go here:</p>

<pre><code class="kotlin">    fun broadcast(event: String) {
        subscriber(event)
        subscriberList.map { subscriber -&gt; subscriber(event)}
    }
</code></pre>

<p>I know there are some other ways to iterate over a list so I give those a shot out of curiosity.</p>

<p>There's <code>for</code> which reminds of PHP's <a href="https://www.php.net/manual/en/control-structures.foreach.php">foreach</a>:</p>

<pre><code class="kotlin">    fun broadcast(event: String) {
        subscriber(event)
        for (subscriber in subscriberList) {
            subscriber(event)
        }
    }
</code></pre>

<p>Then there's <code>forEach</code> which is a bit more functional:</p>

<pre><code class="kotlin">        subscriberList.forEach { subscriber -&gt; subscriber(event) }
</code></pre>

<p>You know what I think I might like that more. I find that I tend to think <code>map</code> implies the list is going to be modified by the loop. The <a href="https://kotlinlang.org/docs/reference/collection-transformations.html">Kotlin documentation</a> has this to say about <code>map</code>:</p>

<blockquote>
  <p>The mapping transformation creates a collection from the results of a function on the elements of another collection.</p>
</blockquote>

<p>The word transformation there stands out to me. I'm not really transforming the collection and I also don't need the result of that transformation. <code>forEach</code> seems much more appropriate. The <strong>semantics</strong> of <code>forEach</code> fit the situation better which means I'll be able to think about the code faster when I come back to it.</p>

<p>There's one last bit of syntactical sugar I'd like to try <code>it</code>. I've see it a bunch of times in various discussions of how lambdas work on collections. I think I can use <code>it</code> here it short up this code just a smidgen:</p>

<pre><code class="kotin">    fun broadcast(event: String) {
        subscriber(event)
        subscriberList.forEach { it(event) }
    }
</code></pre>

<p>It works! With <code>it</code> I don't need to declare the element I'm work on as a <code>subscriber</code>. Instead Kotlin just assumes the variable is <code>it</code>. Kotlin knows, from the type information, that <code>subscriberList</code> holds lambdas. Therefore anything coming out of <code>subscribeList</code> can be called like a function. From that <code>it</code> can be called as a function. Pretty neat!</p>

<p>Here's how it all came together*:</p>

<pre><code class="kotlin">package com.dkanen

class Dispatcher {

    val subscriberList: MutableList&lt;(String) -&gt; Unit&gt; = mutableListOf()

    fun subscribe(subscriberFunction: (String) -&gt; Unit) {
        subscriberList.add(subscriberFunction)
    }

    fun broadcast(event: String) {
        subscriberList.map { subscriber -&gt; subscriber(event)}
    }

    fun subscribe(newSubscriber: Subscriber) {
        subscriberList.add({event -&gt; newSubscriber.receive(event)})
    }
}
</code></pre>

<p>*You may have noticed in the examples above, except the last, I still had references to the old variables like <code>subscriber</code>. It has to do with the way I keep the methods working while I am refactoring. This keeps with test driven development(TDD). I'll write about that some more a different time.</p>

<p>What ways have you found to bring collections into your projects? Let me know by dropping me a line on the <a href="/contact">contact page</a>.</p>
    ]]></content>
</entry>
            <entry>
    <id>https://dkanen.scaleticket.net/blog/shorthand-function-syntax</id>
    <link type="text/html" rel="alternate" href="https://dkanen.scaleticket.net/blog/shorthand-function-syntax" />
    <title>Shorthand Function Syntax</title>
    <published>2020-02-18T00:00:00+00:00</published>
    <updated>2020-02-18T00:00:00+00:00</updated>
    <author>
        <name>David Kanenwisher</name>
    </author>
    <summary type="html">Save yourself some typing(and reading) with Kotlin&#039;s shorthand function syntax....</summary>
    <content type="html"><![CDATA[
        <p>I'd seen some goofy syntax referred to in Kotlin posts and books and today I figured out how to use it!</p>

<p>I had some code that looked like this:</p>

<pre><code class="kotlin">    @Test
    fun `when a lambda is passed to subscribe it can receive a broadcast`() {
        val dispatcher = Dispatcher()

        var passedValue = ""
        val subscribeFunction: (String) -&gt; Unit = { event -&gt;
            passedValue = event
        }

        dispatcher.subscribe(subscribeFunction)
        dispatcher.broadcast("event")

        assertEquals("event", passedValue)
    }
</code></pre>

<p>The whole thing with <code>(String) -&gt;Unit</code> didn't seem necessary. It seems like the type should be inferred. Do I even need <code>subscribeFunction</code>? I was pretty sure I'd seen something in the Big Nerd Ranch Kotlin book about a simple syntax for functions. I started clicking through it. After a few trips around the same chapters I found a section title "Shorthand syntax"! That's it! that's what I'm looking for!</p>

<p>Ecstatic, I flipped back to my editor and updated my code to look like so:</p>

<pre><code class="kotlin">    @Test
    fun `when a lambda is passed to subscribe it can receive a broadcast`() {
        val dispatcher = Dispatcher()

        var passedValue = ""

        dispatcher.subscribe { event -&gt; passedValue = event }
        dispatcher.broadcast("event")

        assertEquals("event", passedValue)
    }
</code></pre>

<p>Notice how I was able to get rid of the function's type signature <code>(String) -&gt; Unit</code> and remove the variable <code>subscribeFunction</code>. All I need is the simple block <code>{ event -&gt; passedValue = event }</code>.</p>

<p>What a day my friends! What. A. Day.</p>

<p>What nifty uses have you come up with for the shorthand syntax for functions? Let me know by dropping me a line on the <a href="/contact">contact page</a>.</p>
    ]]></content>
</entry>
            <entry>
    <id>https://dkanen.scaleticket.net/blog/lambda-sans-return</id>
    <link type="text/html" rel="alternate" href="https://dkanen.scaleticket.net/blog/lambda-sans-return" />
    <title>Lambda Sans Return</title>
    <published>2020-02-17T00:00:00+00:00</published>
    <updated>2020-02-17T00:00:00+00:00</updated>
    <author>
        <name>David Kanenwisher</name>
    </author>
    <summary type="html">I created a lambda in Kotlin the other day and was perplexed that I couldn&#039;t avoid giving it a return type....</summary>
    <content type="html"><![CDATA[
        <p>I created a lambda in Kotlin the other day and was perplexed that I couldn't avoid giving it a return type. Then I heard about <code>Unit</code>. Supposedly, I could return <code>Unit</code> and not have to worry about the return type on my lambdas. I don't know much about <code>Unit</code> but I had to see this in action.</p>

<p>I took some code I've been fiddling with, a sort of observer object that I call a Dispatcher. It accepts a lambda as way to receive an event from the Dispatcher. The test for it looks like so:</p>

<pre><code class="kotlin">package com.dkanen

import kotlin.test.Test
import kotlin.test.*

class DispatcherTest {

    @Test
    fun `when a lambda is passed to subscribe it can receive a broadcast`() {
        val dispatcher = Dispatcher()

        var passedValue = ""
        val subscribeFunction: (String) -&gt; String = { event -&gt;
            passedValue = event
            passedValue
        }

        dispatcher.subscribe(subscribeFunction)
        dispatcher.broadcast("event")

        assertEquals("event", passedValue)
    }
}
</code></pre>

<p>Did you see the <code>subscribeFunction</code> that has a weired second line <code>passedValue</code>? Kotlin's lambda like to keep things short and omit the return statement for the last line. I need to have that strange line there because I need to satisfy the type signature and return a String.</p>

<p>The implementation of Dispatcher that makes the test pass:</p>

<pre><code class="kotlin">package com.dkanen

class Dispatcher {

    var subscriber: (String) -&gt; String = { "test"  }

    fun subscribe(subscriberFunction: (String) -&gt; String) {
        subscriber = subscriberFunction
    }

    fun broadcast(event: String) {
        subscriber(event)
    }
}
</code></pre>

<p>Notice how the <code>var subscriber</code> has a type signature of <code>(String) -&gt; String</code>. This means that the lambda has to take a String as an argument and return a String. I can make it return a String for the sake of making it work. I don't like it though because it suggests to the reader they should do something with that String. Now that I know about <code>Unit</code> I have what I need to rid my code of this confusion.</p>

<p>I go in and update Dispatcher:</p>

<pre><code class="kotlin">package com.dkanen

class Dispatcher {

    var subscriber: (String) -&gt; Unit = {}

    fun subscribe(subscriberFunction: (String) -&gt; Unit) {
        subscriber = subscriberFunction
    }

    fun broadcast(event: String) {
        subscriber(event)
    }
}
</code></pre>

<p>Notice how subscriber type signature is now <code>(String) -&gt; Unit</code>.</p>

<p>Then I update the test:</p>

<pre><code class="kotlin">package com.dkanen

import kotlin.test.Test
import kotlin.test.*

class DispatcherTest {

    @Test
    fun `when a lambda is passed to subscribe it can receive a broadcast`() {
        val dispatcher = Dispatcher()

        var passedValue = ""
        val subscribeFunction: (String) -&gt; Unit = { event -&gt;
            passedValue = event
        }

        dispatcher.subscribe(subscribeFunction)
        dispatcher.broadcast("event")

        assertEquals("event", passedValue)
    }
}
</code></pre>

<p>Checkout how <code>subscribeFunction</code> matches the type signature of of Dispatcher's <code>subscribe</code> by removing the implied return. Awesome sauce.</p>

<p>I am a bit curious about <code>Unit</code> but that's a topic for a different day.</p>

<p>What cool ways are you finding to shorten your lambdas in Kotlin?</p>
    ]]></content>
</entry>
            <entry>
    <id>https://dkanen.scaleticket.net/blog/oh-graphql-may-i-have-a-user</id>
    <link type="text/html" rel="alternate" href="https://dkanen.scaleticket.net/blog/oh-graphql-may-i-have-a-user" />
    <title>Oh GraphQL, May I Have Some Users?</title>
    <published>2020-02-16T00:00:00+00:00</published>
    <updated>2020-02-16T00:00:00+00:00</updated>
    <author>
        <name>David Kanenwisher</name>
    </author>
    <summary type="html">Where in I struggle and then succeed to get some users from the users query in GraphQL....</summary>
    <content type="html"><![CDATA[
        <p>I've heard GraphQL is easy to pick up. I've done a little reading on the official <a href="https://graphql.org/">GraphQL site</a> and watch some videos on YouTube. I figure I got what I need to get started. I just need a GraphQL server.</p>

<p>I went the through the <a href="https://lighthouse-php.com/tutorial/#installation">tutorial</a> on Lighthouse PHP's website. Well, not the whole thing(yet), just the installation part. I stopped there because I got back the user like in their example.</p>

<p>GraphQL Query for a user</p>

<pre><code class="graphql">{
  user(id: 1) {
    id
    name
    email
  }
}
</code></pre>

<p>With this result:</p>

<pre><code class="graphql">{
  "data": {
    "user": {
      "id": "1",
      "name": "Shea Spencer DDS",
      "email": "ismael.fisher@example.net"
    }
  }
}
</code></pre>

<p>Notice how the of <strong>shape</strong> of the query and the result are similar? Maybe you're wondering why I said <strong>shape</strong>? It seems to be the fancy way the GraphQL folks like to say that, ignoring the "data" key, the query and the result have the same keys in the same order. Therefore if I add or remove keys from the query I can change what comes back. For instance I can remove "email" from the query.</p>

<p>GraphQL query for user without "email":</p>

<pre><code class="graphql">{
  user(id: 1) {
    id
    name
  }
}
</code></pre>

<p>Result of the GraphQL query:</p>

<pre><code class="graphql">{
  "data": {
    "user": {
      "id": "1",
      "name": "Shea Spencer DDS"
    }
  }
}
</code></pre>

<p>See how email is gone? Pretty neat, eh? I didn't have to do anything special in my PHP code to make that happen. Lighthouse just handles it for me. Pretty damn spiffy if you ask me. Ok, ok, let's get to the part where I confuse myself and then eventually resolve that confusion in a shower of JSON.</p>

<p>I saw this query for "user(id: 1)". (Can I take you aside for a moment and explain something to you? So those parentheses after "user" that's called an argument. Supposedly any field in GraphQL can take an argument. No more fuddling with the URL non-sense. Rockin' right?). I thought, "If I can get one user I must be able to get 2 users, 3 users, all of the users?" Being the intrepid explorer that I am I tried this query:</p>

<p>First attempt to get users from GraphQL:</p>

<pre><code class="graphql">{
  # switched user to users
  # you can put comments in GraphQL queries
  # so rad
  users {
    id
    name
    email
  }
}
</code></pre>

<p>This is when I realize...The game is a foot!</p>

<pre><code class="graphql">{
  "errors": [
    {
      "message": "Cannot query field \"id\" on type \"UserPaginator\".",
      "extensions": {
        "category": "graphql"
      },
      "locations": [
        {
          "line": 3,
          "column": 5
        }
      ]
    },
    {
      "message": "Cannot query field \"name\" on type \"UserPaginator\".",
      "extensions": {
        "category": "graphql"
      },
      "locations": [
        {
          "line": 4,
          "column": 5
        }
      ]
    },
    {
      "message": "Cannot query field \"email\" on type \"UserPaginator\".",
      "extensions": {
        "category": "graphql"
      },
      "locations": [
        {
          "line": 5,
          "column": 5
        }
      ]
    }
  ]
}
</code></pre>

<p>"I don't want a UserPaginator!", I shake my fist at the screen, "What is this nonsense. I read something about a schema! Show me the schema you foul ruffian!"</p>

<p>The GraphQL Playground has a little schema drawer on the left side. It doesn't response to shouting but it does respond, like a friendly button, to clicks. I scroll around a bit and find what I'm looking for:</p>

<pre><code class="graphql">type UserPaginator {
  paginatorInfo: PaginatorInfo!
  data: [User!]!
}
</code></pre>

<p>Ah ha! There's the User I want. For some reason it's shouting "User!" at me but I'll worry about that later. For now I venture forward. Everybody is always talking about the shapes of queries so I take a run at shaping my query to get at the "User!" in "UserPaginator".</p>

<p>UserPaginator show me Users!</p>

<pre><code class="graphql">{
  users {
    UserPaginator {
      data {
        name
      }
    }
  }
}
</code></pre>

<p>I guess not:</p>

<pre><code class="graphql">{
  "errors": [
    {
      "message": "Cannot query field \"UserPaginator\" on type \"UserPaginator\".",
      "extensions": {
        "category": "graphql"
      },
      "locations": [
        {
          "line": 3,
          "column": 5
        }
      ]
    }
  ]
}
</code></pre>

<p>Drat! That wasn't it. Back to the schema because I clearly don't understand what I think I'm working with. I find a "users" query defined in the schema. I'm pretty sure I got a hold of something here.</p>

<pre><code class="graphql">type Query {
  users(
    first: Int = 10
    page: Int
  ): UserPaginator
  user(id: ID): User
}
</code></pre>

<p>Does that mean "users" returns a UserPaginator? If so then I think I should treat the "users" element as a "UserPaginator" and put fields I want in there.</p>

<p>Query for the fields I want on UserPaginator:</p>

<pre><code class="graphql">{
  users {
    # data is a field on UserPaginator
      data {
        id
        name
        email
      }
  }
}
</code></pre>

<p>The result. I hit pay dirt!</p>

<pre><code class="graphql">{
  "data": {
    "users": {
      "data": [
        {
          "id": "1",
          "name": "Shea Spencer DDS",
          "email": "ismael.fisher@example.net"
        },
        {
          "id": "2",
          "name": "Prof. Soledad Larson",
          "email": "mmorissette@example.net"
        },
        {
          "id": "3",
          "name": "Dr. Coleman Boehm",
          "email": "senger.kolby@example.net"
        },
        {
          "id": "4",
          "name": "Jazmyn Padberg",
          "email": "london72@example.net"
        },
        {
          "id": "5",
          "name": "Parker Stokes",
          "email": "valentina.gulgowski@example.org"
        },
        {
          "id": "6",
          "name": "Raven McDermott",
          "email": "fpouros@example.org"
        },
        {
          "id": "7",
          "name": "Alec Pouros",
          "email": "erdman.herminio@example.org"
        },
        {
          "id": "8",
          "name": "Fanny Harber",
          "email": "erich80@example.com"
        },
        {
          "id": "9",
          "name": "Emelia Rogahn",
          "email": "thurman65@example.org"
        },
        {
          "id": "10",
          "name": "Jayne Klocko",
          "email": "kaya.rutherford@example.net"
        }
      ]
    }
  }
}
</code></pre>

<p>That's how I figured out how to get fields on the users query. I can't say I fully understand why UserPaginator gets to override "users" in the query. Also, why is the element "data" rather than "users"? It seems like I'm losing some useful type information there.</p>

<p>My questions aside, how's your GraphQL journey going?</p>
    ]]></content>
</entry>
            <entry>
    <id>https://dkanen.scaleticket.net/blog/test-events-were-not-received</id>
    <link type="text/html" rel="alternate" href="https://dkanen.scaleticket.net/blog/test-events-were-not-received" />
    <title>I&#039;ll Receive You Some Test Events!</title>
    <published>2020-02-15T00:00:00+00:00</published>
    <updated>2020-02-15T00:00:00+00:00</updated>
    <author>
        <name>David Kanenwisher</name>
    </author>
    <summary type="html">A fix for the Intellij message &quot;Test events were not received&quot; when running tests with Gradle and Kotlin....</summary>
    <content type="html"><![CDATA[
        <p>I sat down in front of my laptop to learn some GraphQL. I was flipping through my open windows and I discovered I had some uncommitted Kotlin code in the repo where I am learning Kotlin. This wouldn't do. No, this wouldn't do.</p>

<p>I went to commit the code and Intellij helpfully told me there were some warnings that I should review before committing.</p>

<p>"OK", I thought, "probably not that important. I'll just run the tests and if they pass I'll commit." If it only it were that easy...queue Jefferson Airplane cuz we're going down a rabbit hole. Intellij gave me a very understated message in my test runner window "Test events were not received". I was pretty sure this was related to Gradle.</p>

<p>As a quick aside, I don't know much about Gradle yet. I need to know more about Gradle. Eventually I'll be able to understand Gradle. Until then, I fully expect to lean on my knowledgeable co-workers to set up Gradle projects correctly.</p>

<p>Some quick <a href="https://duckduckgo.com">DuckDuckGo</a>'ing and I found there was an answer on StackOverflow.</p>

<p><a href="https://stackoverflow.com/questions/57795263/test-events-were-not-received-when-run-tests-using-intellij">“Test events were not received” when run tests using Intellij</a></p>

<p>I spoke the words, "Yay! An answer to my exact question!"</p>

<p>They recommended switching test runners. You go to "File -> Settings ->Build,Execution, Deployment -> Build Tools -> Gradle" and set the "Run tests using" to "Intellij". This worked for a hot second. Then I got skeptical(this often causes me trouble). "Shouldn't this just work?", I thought, "Gradle test works in my shell. Why not in Intellij?". I fiddled with some settings mostly in the aforementioned window and broke the tests such that I couldn't get them to work anymore.</p>

<p>I got a little despondent at this point. I wondered if I'd ever be able to run all my tests in Intellij without having to grok all of Gradle. I just wanted to get back to learning about GraphQL!</p>

<p>Then I had heard a light bulb "click" and I right clicked on the "test" folder. There I found a "Run "All Tests"" option.</p>

<p>I clicked it.</p>

<p>They all ran. I clicked it again. They all ran. I tried the gradle test task in Intellij. Agony again "Test events were not received". It was different I was starting to understand the pain now.</p>

<p>When I ran via "Run "All Tests"" I noticed that it showed "<default package>" at the top. I don't understand what that means exactly. It made me wonder if I had the packages correct in my tests. I started checking them.</p>

<p>That's when I found it. One of them had the package set to "acceptance". I switched it to "com.dkanen". Then bingo bango it worked from Intellij's gradle test task! Well, or so I thought.</p>

<p>Friends, I have to admit I ran into a wall on this one. I can never get gradle test to work more than once in Intellij without running gradle clean first. It's always like this:</p>

<ol>
<li>gradle clean</li>
<li>gradle test</li>
<li>goto 1</li>
</ol>

<p>I'm going to live with "Run "All Tests"" for now.</p>

<p>Have you run into "Test events were not received" in Intellij and found a reliable way to fix it?</p>

<p>I'm going back to GraphQL...for now.</p>
    ]]></content>
</entry>
            <entry>
    <id>https://dkanen.scaleticket.net/blog/single-expression-functions</id>
    <link type="text/html" rel="alternate" href="https://dkanen.scaleticket.net/blog/single-expression-functions" />
    <title>Single Expression Functions</title>
    <published>2020-02-13T00:00:00+00:00</published>
    <updated>2020-02-13T00:00:00+00:00</updated>
    <author>
        <name>David Kanenwisher</name>
    </author>
    <summary type="html">I recently learned about single expression functions and am amazed at how simple the function you can created with them are....</summary>
    <content type="html"><![CDATA[
        <p>I was listening to Talking Kotlin <a href="https://pca.st/09ybe338">Kotlin Cookbook</a>. The author of the Kotlin Cookbook, Ken Kousen, mentioned that one of the features he really likes about Kotlin are single expression functions. He even pointed out how cool it was that many of the functions in the Kotlin standard library are implemented as Single Expression Functions. At this point my curiosity had piqued and I had to know more.</p>

<p>I did some rapid googling and found myself staring at Programming Kotlin by Stephen Samuel and Stefan Bocutiu. There was a very short chapter in there on Single Expression Functions but after staring at it for a few minutes I had to try it out.</p>

<p>I've got this dirt simple class that I was able to change from this:</p>

<pre><code class="kotlin">com.dkanen

class Adventurer(val name: String) {

    var location: Int = 0

    fun walk(): Int {
        return (++location)
    }

    fun talk(): String {
        return "You talk to no one in particular."
    }

    fun listen(): String {
        return "There is no sound to hear."
    }

    fun talk(listener: Adventurer): String {
       return "Talking to yourself may be a sign of genius"
    }

    fun heard(): String {
       return "How fair the beets at this establishment?"
    }

}
</code></pre>

<p>To this:</p>

<pre><code class="kotlin">com.dkanen

class Adventurer(val name: String) {

    var location: Int = 0

    fun walk(): Int = (++location)

    fun talk(): String = "You talk to no one in particular."

    fun listen(): String = "There is no sound to hear."

    fun talk(listener: Adventurer): String = "Talking to yourself may be a sign of genius"

    fun heard(): String = "How fair the beets at this establishment?"

}
</code></pre>

<p>Do you see the difference? Pretty neat eh?</p>

<p>What do you think you could use Single Expression Functions to simplify?</p>
    ]]></content>
</entry>
            <entry>
    <id>https://dkanen.scaleticket.net/blog/getting-started-with-jigsaw</id>
    <link type="text/html" rel="alternate" href="https://dkanen.scaleticket.net/blog/getting-started-with-jigsaw" />
    <title>Getting Started With Jigsaw</title>
    <published>2020-02-13T00:00:00+00:00</published>
    <updated>2020-02-13T00:00:00+00:00</updated>
    <author>
        <name>David Kanenwisher</name>
    </author>
    <summary type="html">You&#039;ve got some ideas kicking around your heard for a blog. You know how to use Laravel pretty well and want to get to writing things down now! Jigsaw the Laravel based static site generator may be just what you need....</summary>
    <content type="html"><![CDATA[
        <p>With a few adjustments to get it to build for my environment I was mostly able to follow Jigsaw's <a href="https://jigsaw.tighten.co/docs/installation/">installation guide</a> I'll throw in a quick summary here in case you don't want to have both tabs open:</p>

<p>First, create the project directory: <code>$ mkdir cool-blog</code>.</p>

<p>Second, install Jigsaw with composer:</p>

<pre><code class="bash">$ cd cool-blog
$ composer require tightenco/jigsaw
</code></pre>

<p>Finally, initialize your project and make it a blog:</p>

<pre><code>./vendor/bin/jigsaw init blog
</code></pre>

<p>Then if you want to take a look at what it looks like run this command:</p>

<pre><code class="bash">$ npm run local
</code></pre>

<p>This creates a <code>build_local</code> directory that allows you to preview your site. Run this command to see what that looks like:</p>

<pre><code class="bash">npm run watch
</code></pre>

<p>Run watch is great because it shows local changes as you make them.</p>

<p>If you want to change what shows up in the title and the base URL take a look at <code>config.php</code> and <code>config.production.php</code> and make some adjustments.</p>

<p>If you want to see what your blog looks when it's released run this command:</p>

<pre><code class="bash">$ npm run production
</code></pre>

<p>As for getting it deployed Jigsaw has a great guide for different targets:
<a href="https://jigsaw.tighten.co/docs/deploying-your-site/">Deploying your site</a></p>

<p>My target was a special system we use at Bushel that utilizes docker. I had commit the <code>build_production</code> folder to make it work like so:</p>

<pre><code class="bash">git add -f build_production &amp;&amp; git commit -m "Build for deploy"
</code></pre>

<p>I need the -f because the .gitignore file has an entry to ignore everything in the build directory <code>/build_*/</code>.</p>

<p>Then I created a Dockerfile that uses the <code>copy</code> command to copy it to the correct directory:</p>

<pre><code>copy ./build_production/ /var/www/public/
</code></pre>

<p>Then I deployed it out to the server and you can see the result!</p>

<p>What are you going to write about in Jigsaw?</p>
    ]]></content>
</entry>
    </feed>
